(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{23:function(e,a,t){e.exports=t(38)},28:function(e,a,t){},29:function(e,a,t){},38:function(e,a,t){"use strict";t.r(a);var n=t(0),l=t.n(n),s=t(20),r=t.n(s),i=(t(28),t(14)),o=t(6),c=t(7),m=t(9),u=t(8),p=t(2),d=t(10),h=(t(29),function(e){function a(){return Object(o.a)(this,a),Object(m.a)(this,Object(u.a)(a).apply(this,arguments))}return Object(d.a)(a,e),Object(c.a)(a,[{key:"render",value:function(){var e=this.props,a=e.handleInputEmail,t=e.handleInputPassword,n=e.onSubmit,s=e.handleEyePassword,r=e.eyePassword,i=e.isErrorVisible;return l.a.createElement(l.a.Fragment,null,l.a.createElement("header",{className:"login__header"},l.a.createElement("h1",{className:"login__title"},"VASS")),l.a.createElement("form",{className:"login__container",onSubmit:n},l.a.createElement("div",{className:"inputs__container"},l.a.createElement("label",{htmlFor:"input__user",className:"label__item label__user"},"Usuario"),l.a.createElement("input",{type:"text",id:"input__user",className:"input__item input__user",onChange:a}),l.a.createElement("label",{htmlFor:"input__password",className:"label__item label__password"},"Contrase\xf1a"),l.a.createElement("div",{className:"password__container"},l.a.createElement("input",{type:r,id:"input__password",className:"input__item input__password",onChange:t}),l.a.createElement("i",{className:"eye fas fa-eye".concat("password"===r?"":"-slash"),onClick:s})),i?l.a.createElement("p",{className:"error__message"}," ",l.a.createElement("i",{className:"fas fa-exclamation-circle"})," El nombre de usuario o la contrase\xf1a son incorrectos."):null,l.a.createElement("input",{type:"submit",value:"Entrar",className:"input__submit"}))),l.a.createElement("div",{className:"who__container"},l.a.createElement("h2",{className:"who__title"},l.a.createElement("span",{className:"who__span"},"Who")," ",l.a.createElement("span",{className:"is__span"},"is")," ",l.a.createElement("span",{className:"who__span"},"Who"))),l.a.createElement("footer",{className:"login__footer"},"VASS - Copyright \xa9 2019 Todos los derechos reservados"))}}]),a}(l.a.Component)),E=function(e){function a(){return Object(o.a)(this,a),Object(m.a)(this,Object(u.a)(a).apply(this,arguments))}return Object(d.a)(a,e),Object(c.a)(a,[{key:"render",value:function(){var e=this.props.detailArr;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"employee__detail"},l.a.createElement("p",{className:"employee__detail--company"},"Empresa:"," ",l.a.createElement("span",{className:"employee__detail--company-span"},e.company)),l.a.createElement("p",{className:"employee__detail--region"},"Regi\xf3n:"," ",l.a.createElement("span",{className:"employee__detail--region-span"},e.physicalDeliveryOfficeName)),l.a.createElement("p",{className:"employee__detail--email"},"Email:"," ",l.a.createElement("a",{className:"employee__detail--email-link",href:"mailto:".concat(e.mail)},e.mail)),l.a.createElement("p",{className:"employee__detail--phone"},"Tlf:"," ",l.a.createElement("a",{className:"employee__detail--phone-link",href:"tel:".concat(e.telephoneNumber)},e.telephoneNumber))))}}]),a}(l.a.Component),b=function(e){function a(){return Object(o.a)(this,a),Object(m.a)(this,Object(u.a)(a).apply(this,arguments))}return Object(d.a)(a,e),Object(c.a)(a,[{key:"render",value:function(){var e=this.props,a=e.filterName,t=e.nameArr,n=e.handleFilter,s=e.collapsibleId,r=e.handleCollapsible,i=e.detailArr,o=e.isErrorVisibleSearch,c=e.handleLogout;return""===a?l.a.createElement("div",{className:"main__container"},l.a.createElement("div",{className:"input__container"},l.a.createElement("p",{className:"logout",onClick:c},"SALIR"),l.a.createElement("label",{className:"label__input",htmlFor:"filterEmployee"},"Campo de b\xfasqueda"),l.a.createElement("div",{className:"search"},l.a.createElement("input",{onChange:n,className:"input",name:"filterEmployee",id:"filterEmployee",type:"text"}),l.a.createElement("i",{className:"fas fa-search"})))):l.a.createElement("div",{className:"main__container"},l.a.createElement("div",{className:"input__container"},l.a.createElement("p",{className:"logout",onClick:c},"SALIR"),l.a.createElement("label",{className:"label__input",htmlFor:"filterEmployee"},"Campo de b\xfasqueda"),l.a.createElement("div",{className:"search"},l.a.createElement("input",{onChange:n,className:"input",name:"filterEmployee",id:"filterEmployee",type:"text"}),l.a.createElement("i",{className:"fas fa-search"})),o?l.a.createElement("p",{className:"error__message"}," ",l.a.createElement("i",{className:"fas fa-exclamation-circle"})," No hay ning\xfan resultado que coincida con la b\xfasqueda."):null),l.a.createElement("div",{className:"list__container"},l.a.createElement("ul",{className:"employee__list"},t.filter(function(e){return"".concat(e.givenName," ").concat(e.sn).toLocaleLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").includes(a.toLocaleLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,""))}).map(function(e){return l.a.createElement("li",{key:e.sAMAccountName,className:"employee__list--item"},l.a.createElement("div",{className:"item__container",onClick:r,id:e.sAMAccountName},l.a.createElement("h2",{className:"item__name"},e.givenName," ",e.sn),l.a.createElement("i",{className:"fas fa-chevron-down"})),s===e.sAMAccountName?l.a.createElement(E,{collapsibleId:s,detailArr:i}):null)}))))}}]),a}(l.a.Component),_=t(11),f=function(e){function a(e){var t;return Object(o.a)(this,a),(t=Object(m.a)(this,Object(u.a)(a).call(this,e))).onSubmit=function(e){e.preventDefault(),fetch("https://whoiswho.vass.es/api/users/login",{method:"POST",body:JSON.stringify(t.state),headers:{"content-Type":"application/json"}}).then(function(e){return e.json()}).then(function(e){var a=e.user.token;""!==a&&(t.setState({isAuthenticated:!0,token:a}),localStorage.setItem("token",JSON.stringify(a)))}).catch(function(e){return t.setState({isErrorVisible:!0})})},t.state={user:{email:"",password:""},nameArr:[],detailArr:[],filterName:"",collapsibleId:null,eyePassword:"password",token:JSON.parse(localStorage.getItem("token"))||"",isAuthenticated:!1,isErrorVisible:!1,isErrorVisibleSearch:!1},t.valueInputEmail="",t.valueInputPassword="",t.handleFilter=t.handleFilter.bind(Object(p.a)(t)),t.handleCollapsible=t.handleCollapsible.bind(Object(p.a)(t)),t.handleEyePassword=t.handleEyePassword.bind(Object(p.a)(t)),t.handleInputEmail=t.handleInputEmail.bind(Object(p.a)(t)),t.handleInputPassword=t.handleInputPassword.bind(Object(p.a)(t)),t.onSubmit=t.onSubmit.bind(Object(p.a)(t)),t.getUsers=t.getUsers.bind(Object(p.a)(t)),t.getUserDetail=t.getUserDetail.bind(Object(p.a)(t)),t.handleLogout=t.handleLogout.bind(Object(p.a)(t)),t}return Object(d.a)(a,e),Object(c.a)(a,[{key:"handleFilter",value:function(e){var a=e.currentTarget.value;this.setState({filterName:a,collapsibleId:null}),a.length>=3&&this.getUsers(a)}},{key:"handleCollapsible",value:function(e){var a=e.currentTarget.id;this.setState(function(e){return a===e.collapsibleId?{collapsibleId:null}:{collapsibleId:a}}),this.getUserDetail(a)}},{key:"handleEyePassword",value:function(){this.setState(function(e){return{eyePassword:"password"===e.eyePassword?"text":"password"}})}},{key:"handleInputEmail",value:function(e){this.valueInputEmail=e.currentTarget.value,this.setState({user:{email:this.valueInputEmail,password:this.valueInputPassword}})}},{key:"handleInputPassword",value:function(e){this.valueInputPassword=e.currentTarget.value,this.setState({user:{email:this.valueInputEmail,password:this.valueInputPassword}})}},{key:"getUsers",value:function(e){var a=this;fetch("https://whoiswho.vass.es/api/employees?cn=".concat(e),{method:"GET",headers:{Authorization:"Token ".concat(this.state.token),"content-Type":"application/json"}}).then(function(e){return e.json()}).then(function(e){return a.setState({nameArr:e})}).catch(function(e){return a.setState(function(e){return{isErrorVisibleSearch:!1===e.isErrorVisibleSearch}})})}},{key:"handleLogout",value:function(){this.setState({token:""})}},{key:"getUserDetail",value:function(e){var a=this;fetch("https://whoiswho.vass.es/api/employees/".concat(e),{method:"GET",headers:{Authorization:"Token ".concat(this.state.token)}}).then(function(e){return e.json()}).then(function(e){return a.setState({detailArr:e})})}},{key:"render",value:function(){var e=this,a=this.state,t=a.nameArr,n=a.filterName,s=a.eyePassword,r=a.collapsibleId,i=a.detailArr,o=a.isErrorVisible,c=a.isErrorVisibleSearch;return l.a.createElement(_.d,null,l.a.createElement(_.b,{exact:!0,path:"/",render:function(){return!0===e.state.isAuthenticated?l.a.createElement(_.a,{from:"/",to:"/search"}):l.a.createElement(h,{handleEyePassword:e.handleEyePassword,eyePassword:s,handleInputEmail:e.handleInputEmail,handleInputPassword:e.handleInputPassword,onSubmit:e.onSubmit,isErrorVisible:o})}}),l.a.createElement(_.b,{path:"/search",render:function(){return""===e.state.token?l.a.createElement(_.a,{from:"/search",to:"/"}):l.a.createElement(b,{filterName:n,nameArr:t,handleFilter:e.handleFilter,handleCollapsible:e.handleCollapsible,collapsibleId:r,detailArr:i,isErrorVisibleSearch:c,handleLogout:e.handleLogout})}}))}}]),a}(l.a.Component);r.a.render(l.a.createElement(i.a,null," ",l.a.createElement(f,null)," "),document.getElementById("root"))}},[[23,1,2]]]);
//# sourceMappingURL=main.e6346708.chunk.js.map