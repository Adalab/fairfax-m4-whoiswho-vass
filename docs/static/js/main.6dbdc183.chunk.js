(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{23:function(e,a,t){e.exports=t(38)},28:function(e,a,t){},29:function(e,a,t){},38:function(e,a,t){"use strict";t.r(a);var l=t(0),s=t.n(l),n=t(20),r=t.n(n),c=(t(28),t(14)),i=t(6),o=t(7),m=t(9),u=t(8),h=t(2),d=t(10),p=(t(29),function(e){function a(){return Object(i.a)(this,a),Object(m.a)(this,Object(u.a)(a).apply(this,arguments))}return Object(d.a)(a,e),Object(o.a)(a,[{key:"render",value:function(){var e=this.props,a=e.handleInputEmail,t=e.handleInputPassword,l=e.onSubmit,n=e.handleEyePassword,r=e.eyePassword,c=e.isErrorVisible;return s.a.createElement(s.a.Fragment,null,s.a.createElement("header",{className:"login__header"},s.a.createElement("a",{className:"login__title",href:"https://www.vass.es/"},s.a.createElement("h1",{className:"login__title"},"VASS"))),s.a.createElement("form",{className:"login__container",onSubmit:l},s.a.createElement("div",{className:"inputs__container"},s.a.createElement("label",{htmlFor:"input__user",className:"label__item label__user"},"Usuario"),s.a.createElement("input",{type:"text",id:"input__user",className:"input__item input__user ".concat(!0===c?"red":""),onChange:a}),s.a.createElement("label",{htmlFor:"input__password",className:"label__item label__password"},"Contrase\xf1a"),s.a.createElement("div",{className:"password__container"},s.a.createElement("input",{type:r,id:"input__password",className:"input__item input__password ".concat(!0===c?"red":""),onChange:t}),s.a.createElement("i",{className:"eye fas fa-eye".concat("password"===r?"":"-slash"),onClick:n})),c?s.a.createElement("p",{className:"error__message"}," ",s.a.createElement("i",{className:"fas fa-exclamation-circle"})," El nombre de usuario o la contrase\xf1a son incorrectos."):null,s.a.createElement("input",{type:"submit",value:"Entrar",className:"input__submit".concat(c?"-pad":"")}))),s.a.createElement("div",{className:"who__container"},s.a.createElement("h2",{className:"who__title"},s.a.createElement("span",{className:"who__span"},"Who")," ",s.a.createElement("span",{className:"is__span"},"is")," ",s.a.createElement("span",{className:"who__span"},"Who"))),s.a.createElement("footer",{className:"login__footer"},"VASS - Copyright \xa9 2019 Todos los derechos reservados"))}}]),a}(s.a.Component)),_=function(e){function a(){return Object(i.a)(this,a),Object(m.a)(this,Object(u.a)(a).apply(this,arguments))}return Object(d.a)(a,e),Object(o.a)(a,[{key:"render",value:function(){var e=this.props.detailArr;return s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"employee__detail"},s.a.createElement("div",{className:"city"},s.a.createElement("p",{className:"employee__detail--company"},"Empresa:"," ",s.a.createElement("span",{className:"employee__detail--company-span employee__detail-marg"},e.company)),s.a.createElement("p",{className:"employee__detail--region"},"Regi\xf3n:"," ",s.a.createElement("span",{className:"employee__detail--region-span employee__detail-marg"},e.physicalDeliveryOfficeName))),s.a.createElement("div",{className:"contact"},s.a.createElement("p",{className:"employee__detail--email"},"Email:"," ",s.a.createElement("a",{className:"employee__detail--email-link",href:"mailto:".concat(e.mail)},e.mail)),s.a.createElement("p",{className:"employee__detail--phone"},"Tlf:"," ",s.a.createElement("a",{className:"employee__detail--phone-link",href:"tel:".concat(e.telephoneNumber)},e.telephoneNumber)))))}}]),a}(s.a.Component),E=function(e){function a(){return Object(i.a)(this,a),Object(m.a)(this,Object(u.a)(a).apply(this,arguments))}return Object(d.a)(a,e),Object(o.a)(a,[{key:"render",value:function(){var e=this.props,a=e.user,t=e.filterName,l=e.nameArr,n=e.handleFilter,r=e.collapsibleId,c=e.handleCollapsible,i=e.detailArr,o=e.isErrorVisibleSearch,m=e.handleLogout;return""===t?s.a.createElement("div",{className:"main__container"},s.a.createElement("header",{className:"list__header"},s.a.createElement("h1",{className:"list__tittle"},"VASS"),s.a.createElement("div",{className:"container__all"},s.a.createElement("div",{className:"user__container"},s.a.createElement("i",{className:"far fa-user"}),s.a.createElement("p",{className:"user__text"},"Hola, ".concat(a.email))),s.a.createElement("div",{className:"logout__container"},s.a.createElement("p",{className:"logout",onClick:m},"Salir"),s.a.createElement("i",{className:"fas fa-sign-out-alt logout__arrow",onClick:m})))),s.a.createElement("div",{className:"input__container"},s.a.createElement("label",{className:"label__input",htmlFor:"filterEmployee"},"Campo de b\xfasqueda"),s.a.createElement("div",{className:"search"},s.a.createElement("input",{onChange:n,className:"input__search",name:"filterEmployee",id:"filterEmployee",type:"text",value:t}),s.a.createElement("i",{className:"fas fa-search"}))),s.a.createElement("div",{className:"who__container--search"},s.a.createElement("h2",{className:"who__title--search"},s.a.createElement("span",{className:"who__span--search"},"Who")," ",s.a.createElement("span",{className:"is__span--search"},"is")," ",s.a.createElement("span",{className:"who__span--search"},"Who"))),s.a.createElement("footer",{className:"login__footer--search"},"VASS - Copyright \xa9 2019 Todos los derechos reservados")):s.a.createElement("div",{className:"main__container"},s.a.createElement("header",{className:"list__header"},s.a.createElement("h1",{className:"list__tittle"},"VASS"),s.a.createElement("div",{className:"container__all"},s.a.createElement("div",{className:"user__container"},s.a.createElement("i",{className:"far fa-user"}),s.a.createElement("p",{className:"user__text"},"Hola, ".concat(a.email))),s.a.createElement("div",{className:"logout__container"},s.a.createElement("p",{className:"logout",onClick:m},"Salir"),s.a.createElement("i",{className:"fas fa-sign-out-alt logout__arrow",onClick:m})))),s.a.createElement("div",{className:"input__container"},s.a.createElement("label",{className:"label__input",htmlFor:"filterEmployee"},"Campo de b\xfasqueda"),s.a.createElement("div",{className:"search"},s.a.createElement("input",{onChange:n,className:"input__search",name:"filterEmployee",id:"filterEmployee",type:"text",value:t}),s.a.createElement("i",{className:"fas fa-search"})),o?s.a.createElement("p",{className:"error__message--search"}," ",s.a.createElement("i",{className:"fas fa-exclamation-circle"})," No hay ning\xfan resultado que coincida con la b\xfasqueda."):null),s.a.createElement("div",{className:"list__container ".concat(0===l.length?"hidden":"")},s.a.createElement("ul",{className:"employee__list"},l.map(function(e){return s.a.createElement("li",{key:e.sAMAccountName,className:"employee__list--item"},s.a.createElement("div",{className:"item__container",onClick:c,id:e.sAMAccountName},s.a.createElement("h2",{className:"item__name"},e.givenName," ",e.sn),s.a.createElement("i",{className:"fas fa-chevron-down ".concat(r===e.sAMAccountName?"upside-down":null)})),r===e.sAMAccountName?s.a.createElement(_,{collapsibleId:r,detailArr:i}):null)}))),s.a.createElement("div",{className:"who__container--search"},s.a.createElement("h2",{className:"who__title--search"},s.a.createElement("span",{className:"who__span--search"},"Who")," ",s.a.createElement("span",{className:"is__span--search"},"is")," ",s.a.createElement("span",{className:"who__span--search"},"Who"))),s.a.createElement("footer",{className:"login__footer--search"},"VASS - Copyright \xa9 2019 Todos los derechos reservados"))}}]),a}(s.a.Component),N=t(11),b=function(e){function a(e){var t;return Object(i.a)(this,a),(t=Object(m.a)(this,Object(u.a)(a).call(this,e))).onSubmit=function(e){e.preventDefault(),fetch("https://whoiswho.vass.es/api/users/login",{method:"POST",body:JSON.stringify(t.state),headers:{"content-Type":"application/json"}}).then(function(e){return e.json()}).then(function(e){var a=e.user.token;""!==a&&(t.setState({isAuthenticated:!0,token:a}),localStorage.setItem("token",JSON.stringify(a)),localStorage.setItem("email",JSON.stringify(e.user.email)))}).catch(function(e){return t.setState({isErrorVisible:!0})})},t.state={user:{email:JSON.parse(localStorage.getItem("email"))||"",password:""},nameArr:[],detailArr:[],filterName:"",collapsibleId:null,eyePassword:"password",token:JSON.parse(localStorage.getItem("token"))||"",isAuthenticated:!1,isErrorVisible:!1,isErrorVisibleSearch:!1},t.valueInputEmail="",t.valueInputPassword="",t.handleFilter=t.handleFilter.bind(Object(h.a)(t)),t.handleCollapsible=t.handleCollapsible.bind(Object(h.a)(t)),t.handleEyePassword=t.handleEyePassword.bind(Object(h.a)(t)),t.handleInputEmail=t.handleInputEmail.bind(Object(h.a)(t)),t.handleInputPassword=t.handleInputPassword.bind(Object(h.a)(t)),t.onSubmit=t.onSubmit.bind(Object(h.a)(t)),t.getUsers=t.getUsers.bind(Object(h.a)(t)),t.getUserDetail=t.getUserDetail.bind(Object(h.a)(t)),t.handleLogout=t.handleLogout.bind(Object(h.a)(t)),t}return Object(d.a)(a,e),Object(o.a)(a,[{key:"handleFilter",value:function(e){var a=e.currentTarget.value;this.setState({filterName:a,collapsibleId:null}),a.length>=3&&this.getUsers(a)}},{key:"handleCollapsible",value:function(e){var a=e.currentTarget.id;this.setState(function(e){return a===e.collapsibleId?{collapsibleId:null}:{collapsibleId:a}}),this.getUserDetail(a)}},{key:"handleEyePassword",value:function(){this.setState(function(e){return{eyePassword:"password"===e.eyePassword?"text":"password"}})}},{key:"handleInputEmail",value:function(e){this.valueInputEmail=e.currentTarget.value,this.setState({user:{email:this.valueInputEmail,password:this.valueInputPassword}})}},{key:"handleInputPassword",value:function(e){this.valueInputPassword=e.currentTarget.value,this.setState({user:{email:this.valueInputEmail,password:this.valueInputPassword}})}},{key:"getUsers",value:function(e){var a=this;fetch("https://whoiswho.vass.es/api/employees?cn=".concat(e),{method:"GET",headers:{Authorization:"Token ".concat(this.state.token),"content-Type":"application/json"}}).then(function(e){return e.json()}).then(function(e){return a.setState({nameArr:e,isErrorVisibleSearch:!1})}).catch(function(e){return a.setState({isErrorVisibleSearch:!0,nameArr:[]})})}},{key:"handleLogout",value:function(){this.setState({user:{email:"",password:""},nameArr:[],detailArr:[],filterName:"",collapsibleId:null,eyePassword:"password",token:"",isAuthenticated:!1,isErrorVisible:!1,isErrorVisibleSearch:!1}),localStorage.removeItem("token"),localStorage.removeItem("email")}},{key:"getUserDetail",value:function(e){var a=this;fetch("https://whoiswho.vass.es/api/employees/".concat(e),{method:"GET",headers:{Authorization:"Token ".concat(this.state.token)}}).then(function(e){return e.json()}).then(function(e){return a.setState({detailArr:e})})}},{key:"render",value:function(){var e=this,a=this.state,t=a.user,l=a.nameArr,n=a.filterName,r=a.eyePassword,c=a.collapsibleId,i=a.detailArr,o=a.isErrorVisible,m=a.isErrorVisibleSearch;return s.a.createElement(N.d,null,s.a.createElement(N.b,{exact:!0,path:"/",render:function(){return!0===e.state.isAuthenticated?s.a.createElement(N.a,{from:"/",to:"/search"}):s.a.createElement(p,{handleEyePassword:e.handleEyePassword,eyePassword:r,handleInputEmail:e.handleInputEmail,handleInputPassword:e.handleInputPassword,onSubmit:e.onSubmit,isErrorVisible:o})}}),s.a.createElement(N.b,{path:"/search",render:function(){return""===e.state.token?s.a.createElement(N.a,{from:"/search",to:"/"}):s.a.createElement(E,{user:t,filterName:n,nameArr:l,handleFilter:e.handleFilter,handleCollapsible:e.handleCollapsible,collapsibleId:c,detailArr:i,isErrorVisibleSearch:m,handleLogout:e.handleLogout})}}))}}]),a}(s.a.Component);r.a.render(s.a.createElement(c.a,null," ",s.a.createElement(b,null)," "),document.getElementById("root"))}},[[23,1,2]]]);
//# sourceMappingURL=main.6dbdc183.chunk.js.map